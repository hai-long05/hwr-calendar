"use strict";var rr=Object.create;var ye=Object.defineProperty;var or=Object.getOwnPropertyDescriptor;var nr=Object.getOwnPropertyNames;var sr=Object.getPrototypeOf,ir=Object.prototype.hasOwnProperty;var ar=(e,t)=>{for(var o in t)ye(e,o,{get:t[o],enumerable:!0})},at=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of nr(t))!ir.call(e,n)&&n!==o&&ye(e,n,{get:()=>t[n],enumerable:!(r=or(t,n))||r.enumerable});return e};var g=(e,t,o)=>(o=e!=null?rr(sr(e)):{},at(t||!e||!e.__esModule?ye(o,"default",{value:e,enumerable:!0}):o,e)),cr=e=>at(ye({},"__esModule",{value:!0}),e);var Pr={};ar(Pr,{attendeePartStatusTypes:()=>jt,classTypes:()=>kt,dateObjectTypes:()=>Lt,encodingTypes:()=>Mt,generateIcsAlarm:()=>$e,generateIcsAttachment:()=>Ze,generateIcsAttendee:()=>X,generateIcsCalendar:()=>yr,generateIcsDate:()=>We,generateIcsDateTime:()=>P,generateIcsDuration:()=>_,generateIcsEvent:()=>qe,generateIcsMail:()=>z,generateIcsOrganizer:()=>we,generateIcsRecurrenceRule:()=>ee,generateIcsTimeStamp:()=>B,generateIcsTimezone:()=>Xe,generateIcsTimezoneProp:()=>Qe,generateIcsTrigger:()=>He,generateIcsWeekdayNumber:()=>Ge,getDurationFromInterval:()=>hr,getEventEnd:()=>_r,getEventEndFromDuration:()=>it,icsAlarmToObject:()=>De,icsAttachmentToObject:()=>be,icsAttendeeToObject:()=>$,icsCalendarToObject:()=>er,icsDateTimeToDateTime:()=>Y,icsDateToDate:()=>Ae,icsDurationToObject:()=>L,icsEventToObject:()=>Se,icsOrganizerToObject:()=>xe,icsRecurrenceIdToObject:()=>tr,icsRecurrenceRuleToObject:()=>G,icsTimeStampToObject:()=>O,icsTimezonePropToObject:()=>Te,icsTimezoneToObject:()=>Ne,icsTriggerToObject:()=>Ve,icsWeekdayNumberToObject:()=>Ie,parseIcsAlarm:()=>Dr,parseIcsAttachment:()=>Er,parseIcsAttendee:()=>lr,parseIcsCalendar:()=>Lr,parseIcsDate:()=>gr,parseIcsDateTime:()=>dr,parseIcsDuration:()=>fr,parseIcsEvent:()=>Mr,parseIcsOrganizer:()=>xr,parseIcsRecurrenceId:()=>Yr,parseIcsRecurrenceRule:()=>vr,parseIcsTimezone:()=>Cr,parseIcsTimezoneProp:()=>jr,parseIcsTrigger:()=>Or,parseIcsWeekdayNumber:()=>Ir,parseicsTimeStamp:()=>Rr,recurrenceObjectKeyIsNumber:()=>Xt,recurrenceObjectKeyIsNumberArray:()=>qt,recurrenceObjectKeyIsTimeStamp:()=>Jt,recurrenceObjectKeyIsWeekdayNumberArray:()=>Qt,recurrenceRuleFrequencies:()=>Bt,statusTypes:()=>tt,timeTransparentTypes:()=>Ut,timezonePropTypes:()=>Wt,triggerRelations:()=>Yt,valueTypes:()=>ur,weekDays:()=>Re,zAttachment:()=>te,zAttendee:()=>U,zDateObject:()=>l,zOrganizer:()=>se,zRecurrenceId:()=>ae,zVAlarm:()=>ne,zVCalendar:()=>rt,zVCalendarMethods:()=>Ht,zVEvent:()=>ce,zVEventBase:()=>Ft,zVEventDuration:()=>K,zVEventDurationOrEnd:()=>Zt,zVEventRecurrenceRule:()=>k,zVEventTrigger:()=>oe,zVEventTriggerBase:()=>Pt,zVEventTriggerOptions:()=>_t,zVEventTriggerUnion:()=>ht,zVTimezone:()=>pe,zVTimezoneProp:()=>Oe,zWeekdayNumberObject:()=>ie});module.exports=cr(Pr);var ct={ACTION:"action",DESCRIPTION:"description",DURATION:"duration",REPEAT:"repeat",SUMMARY:"summary",TRIGGER:"trigger",ATTACH:"attachment",ATTENDEE:"attendee"},pt={action:"ACTION",description:"DESCRIPTION",duration:"DURATION",repeat:"REPEAT",summary:"SUMMARY",trigger:"TRIGGER",attachment:"ATTACH",attendee:"ATTENDEE"};var ke=g(require("lodash/compact"),1);var mt={METHOD:"method",PRODID:"prodId",VERSION:"version"},Tt={method:"METHOD",prodId:"PRODID",version:"VERSION"};var Ke="BEGIN",ve="END",yt="VCALENDAR",Me="VTIMEZONE",je="STANDARD",Ce="DAYLIGHT",Le="VEVENT",Ye="VALARM";var J=e=>new RegExp(`${Ke}:${e}([\\s\\S]*?)${ve}:${e}`,"g"),he=J(Me),_e=J(je),Pe=J(Ce),Be=J(Le),Ue=J(Ye),W=e=>new RegExp(`${Ke}:${e}|${ve}:${e}`,"g"),ut=W(yt),Et=W(Me),lt=W(je),ft=W(Ce),gt=W(Le),dt=W(Ye);var ue=/\r\n|\r|\n/,Ee=`\r
`,Rt=":",q=",",Ot='"',h=";";var Q="=";var le=e=>`${e}${Ee}`,m=(e,t,o)=>o?t==null?"":le(`${e};${o}:${t}`):le(`${e}:${t}`),b=e=>le(`BEGIN:${e}`),A=e=>le(`END:${e}`);var d=e=>{if(!(e.length<1))return`${e.map(t=>`${t.key}${Q}${t.value}`).join(h)}`};var Ze=e=>{if(e.type==="uri"){let t=d((0,ke.default)([e.formatType&&{key:"FMTTYPE",value:e.formatType}]));return m("ATTACH",e.url,t)}if(e.type==="binary"){let t=d((0,ke.default)([e.value&&{key:"VALUE",value:e.value},e.encoding&&{key:"ENCODING",value:e.encoding}]));return m("ATTACH",e.binary,t)}throw Error(`Attachment has no type! ${JSON.stringify(e)}`)};var bt=g(require("lodash/compact"),1);var z=(e,t)=>t?`"MAILTO:${e}"`:`MAILTO:${e}`;var X=(e,t)=>{let o=d((0,bt.default)([e.dir&&{key:"DIR",value:`"${e.dir}"`},e.delegatedFrom&&{key:"DELEGATED-FROM",value:z(e.delegatedFrom,!0)},e.member&&{key:"MEMBER",value:z(e.member,!0)},e.role&&{key:"ROLE",value:e.role},e.name&&{key:"CN",value:e.name},e.partstat&&{key:"PARTSTAT",value:e.partstat},e.role&&{key:"ROLE",value:e.role},e.sentBy&&{key:"SENT-BY",value:z(e.sentBy,!0)}]));return m(t,z(e.email),o)};var _=e=>{let t="";return e.before&&(t+="-"),t+="P",e.weeks&&(t+=`${e.weeks}W`),e.days&&(t+=`${e.days}D`),(e.hours||e.minutes||e.seconds)&&(t+="T",e.hours&&(t+=`${e.hours}H`),e.minutes&&(t+=`${e.minutes}M`),e.seconds&&(t+=`${e.seconds}S`)),t};var Vt=g(require("lodash/compact"),1);var At=g(require("lodash/compact"),1);var Fe=g(require("lodash/isDate"),1),We=e=>{if(!(0,Fe.default)(e))throw Error(`Incorrect date object: ${e}`);let t=e.toISOString(),o=t.slice(0,4),r=t.slice(5,7),n=t.slice(8,10);return`${o}${r}${n}`},P=e=>{if(!(0,Fe.default)(e))throw Error(`Incorrect date object: ${e}`);let t=e.toISOString(),o=t.slice(0,4),r=t.slice(5,7),n=t.slice(8,10),s=t.slice(11,13),i=t.slice(14,16),a=t.slice(17,19);return`${o}${r}${n}T${s}${i}${a}Z`};var B=(e,t)=>{let o=t.type==="DATE"?We(t.date):P(t.date),r=d((0,At.default)([t.type&&{key:"VALUE",value:t.type},t.timezone&&{key:"TZID",value:t.timezone}]));return m(e,o,r)};var He=e=>{var o;let t=d((0,Vt.default)([((o=e.options)==null?void 0:o.related)&&{key:"RELATED",value:e.options.related}]));if(e.type==="absolute")return B("TRIGGER",e.value);if(e.type==="relative")return m("TRIGGER",_(e.value),t)};var V=e=>Object.keys(e);var $e=e=>{let t=V(e),o="";return o+=b("VALARM"),t.forEach(r=>{if(r==="attachments"||r==="attendees")return;let n=pt[r];if(!n)return;let s=e[r];if(s&&s!=null){if(r==="trigger"){o+=He(s);return}if(r==="duration"){o+=m(n,_(s));return}if(r==="repeat"){o+=m(n,s==null?void 0:s.toString());return}o+=m(n,String(s))}}),e.attachments&&e.attachments.length>0&&e.attachments.forEach(r=>{o+=Ze(r)}),e.attendees&&e.attendees.length>0&&e.attendees.forEach(r=>{o+=X(r,"ATTENDEE")}),o+=A("VALARM"),o};var Dt={"LAST-MODIFIED":"lastModified",ALARM:"alarm",CATEGORIES:"categories",CREATED:"created",DESCRIPTION:"description",DTSTAMP:"stamp",DTSTART:"start",LOCATION:"location",RRULE:"recurrenceRule",SUMMARY:"summary",UID:"uid",TRANSP:"timeTransparent",URL:"url",DTEND:"end",DURATION:"duration",GEO:"geo",CLASS:"class",ORGANIZER:"organizer",PRIORITY:"priority",SEQ:"sequence",STATUS:"status",ATTACH:"attach","RECURRENCE-ID":"recurrenceId",ATTENDEE:"attendee",COMMENT:"comment"},xt={alarm:"ALARM",categories:"CATEGORIES",created:"CREATED",description:"DESCRIPTION",lastModified:"LAST-MODIFIED",location:"LOCATION",recurrenceRule:"RRULE",stamp:"DTSTAMP",start:"DTSTART",summary:"SUMMARY",uid:"UID",timeTransparent:"TRANSP",url:"URL",end:"DTEND",duration:"DURATION",geo:"GEO",class:"CLASS",organizer:"ORGANIZER",priority:"PRIORITY",sequence:"SEQ",status:"STATUS",attach:"ATTACH",recurrenceId:"RECURRENCE-ID",attendee:"ATTENDEE",comment:"COMMENT"};var pr=["stamp","start","end","created","lastModified"],fe=e=>pr.includes(e),mr=["categories"],ge=e=>mr.includes(e);var It=g(require("lodash/compact"),1);var we=e=>{let t=d((0,It.default)([e.dir&&{key:"DIR",value:`"${e.dir}"`},e.name&&{key:"CN",value:e.name},e.sentBy&&{key:"SENT-BY",value:z(e.sentBy)}]));return m("ORGANIZER",z(e.email),t)};var Je=g(require("lodash/compact"),1);var Ge=e=>e.occurence?`${e.occurence}${e.day}`:e.day;var ee=e=>{let t="",o=d((0,Je.default)([e.byDay&&{key:"BYDAY",value:e.byDay.map(r=>Ge(r)).join(",")},e.byHour&&{key:"BYHOUR",value:e.byHour.join(",")},e.byMinute&&{key:"BYMINUTE",value:e.byMinute.join(",")},e.byMonth&&{key:"BYMONTH",value:e.byMonth.join(",")},e.byMonthday&&{key:"BYMONTHDAY",value:e.byMonthday.join(",")},e.bySecond&&{key:"BYSECOND",value:e.bySecond.join(",")},e.bySetPos&&{key:"BYSETPOS",value:e.bySetPos.join(",")},e.byWeekNo&&{key:"BYWEEKNO",value:e.byWeekNo.join(",")},e.byYearday&&{key:"BYYEARDAY",value:e.byYearday.join(",")},e.count&&{key:"COUNT",value:e.count.toString()},e.frequency&&{key:"FREQ",value:e.frequency},e.interval&&{key:"INTERVAL",value:e.interval.toString()},e.until&&{key:"UNTIL",value:`${e.until.timezone&&`${d((0,Je.default)([{key:"TZID",value:e.until.timezone}]))}=`}${e.until.date}`},e.workweekStart&&{key:"WKST",value:e.workweekStart}]));return t+=m("RRULE",o),t};var qe=e=>{let t=V(e),o="";return o+=b("VEVENT"),t.forEach(r=>{if(r==="alarms"||r==="attendees")return;let n=xt[r];if(!n)return;let s=e[r];if(s!=null){if(fe(r)){o+=B(n,s);return}if(ge(r)){o+=m(n,s.join(","));return}if(r==="recurrenceRule"){o+=ee(s);return}if(r==="duration"){o+=m(n,_(s));return}if(r==="organizer"){o+=we(s);return}if(r==="sequence"){o+=s.toString();return}o+=m(n,String(s))}}),e.alarms&&e.alarms.length>0&&e.alarms.forEach(r=>{o+=$e(r)}),e.attendees&&e.attendees.length>0&&e.attendees.forEach(r=>{o+=X(r,"ATTENDEE")}),o+=A("VEVENT"),o};var St={"LAST-MODIFIED":"lastModified",TZID:"id",TZURL:"url"},Nt={id:"TZID",lastModified:"LAST-MODIFIED",url:"TZURL"};var zt={COMMENT:"comment",DTSTART:"start",RDATE:"recurrenceDate",RRULE:"recurrenceRule",TZNAME:"name",TZOFFSETFROM:"offsetFrom",TZOFFSETTO:"offsetTo"},Kt={comment:"COMMENT",name:"TZNAME",offsetFrom:"TZOFFSETFROM",offsetTo:"TZOFFSETTO",recurrenceDate:"RDATE",recurrenceRule:"RRULE",start:"DTSTART"};var Qe=e=>{let t=V(e),o="";return o+=b(e.type),t.forEach(r=>{if(r==="type")return;let n=Kt[r];if(!n)return;let s=e[r];if(r==="start"){o+=m(n,P(s));return}if(r==="recurrenceRule"){o+=ee(s);return}if(r==="recurrenceDate"){o+=B(n,s);return}o+=m(n,String(s))}),o+=A(e.type),o};var Xe=e=>{let t=V(e),o="";return o+=b("VTIMEZONE"),t.forEach(r=>{if(r==="props")return;let n=Nt[r];if(!n)return;let s=e[r];if(r==="lastModified"){o+=m(n,P(s));return}o+=m(n,String(s))}),e.props&&e.props.length>0&&e.props.forEach(r=>{o+=Qe(r)}),o+=A("VTIMEZONE"),o};var vt=e=>{let t=e.split(ue),o=[];return t.forEach(r=>{if(r.length<75){o.push(r);return}Tr(r,75).forEach(n=>{o.push(n)})}),o.join(Ee)},Tr=(e,t)=>{let o=e,r=[];for(;Math.ceil(o.length/t)>=1;)r.push(r.length===0?o.substring(0,t):` ${o.substring(0,t)}`),o=o.substring(t);return r};var yr=e=>{let t=V(e),o="";return o+=b("VCALENDAR"),t.forEach(r=>{if(r==="events"||r==="timezones")return;let n=Tt[r];if(!n)return;let s=e[r];o+=m(n,s)}),e.timezones&&e.timezones.length>0&&e.timezones.forEach(r=>{o+=Xe(r)}),e.events&&e.events.length>0&&e.events.forEach(r=>{o+=qe(r)}),o+=A("VCALENDAR"),vt(o)};var F=g(require("lodash/set"),1);var j=require("zod");var f=require("zod"),Mt=["BASE64"],ur=["BINARY"],te=f.z.discriminatedUnion("type",[f.z.object({type:f.z.literal("uri"),url:f.z.string().url(),formatType:f.z.string().optional(),encoding:f.z.never().optional(),value:f.z.never().optional(),binary:f.z.never().optional()}),f.z.object({type:f.z.literal("binary"),url:f.z.never().optional(),formatType:f.z.never().optional(),encoding:f.z.enum(Mt),value:f.z.enum(["BINARY"]),binary:f.z.string()})]);var D=require("zod"),jt=["TENTATIVE","ACCEPTED","CANCELLED","DELEGATED"],U=D.z.object({email:D.z.string().email(),name:D.z.string().optional(),member:D.z.string().email().optional(),delegatedFrom:D.z.string().email().optional(),role:D.z.string().optional(),partstat:D.z.enum(jt).optional(),dir:D.z.string().url().optional(),sentBy:D.z.string().email().optional()});var M=require("zod"),K=M.z.object({before:M.z.boolean().optional(),weeks:M.z.number().optional(),days:M.z.number().optional(),hours:M.z.number().optional(),minutes:M.z.number().optional(),seconds:M.z.number().optional()});var x=require("zod");var Ct=require("date-fns"),re=require("zod"),Lt=["DATE","DATE-TIME"],l=re.z.object({date:re.z.date().transform(e=>(0,Ct.setMilliseconds)(e,0)),type:re.z.enum(Lt).optional(),timezone:re.z.string().optional()});var Yt=["START","END"],ht=x.z.discriminatedUnion("type",[x.z.object({type:x.z.literal("absolute"),value:l}),x.z.object({type:x.z.literal("relative"),value:K})]),_t=x.z.object({related:x.z.enum(Yt).optional()}),Pt=x.z.object({options:_t.optional()}),oe=x.z.intersection(Pt,ht);var ne=j.z.object({action:j.z.string().default("DISPLAY"),description:j.z.string().optional(),trigger:oe,attendees:j.z.array(U).optional(),duration:K.optional(),repeat:j.z.number().optional(),summary:j.z.string().optional(),attachments:j.z.array(te).optional()});var v=require("zod");var y=require("zod");var H=require("zod"),se=H.z.object({name:H.z.string().optional(),email:H.z.string().email(),dir:H.z.string().optional(),sentBy:H.z.string().email().optional()});var u=require("zod");var de=require("zod"),Re=["MO","TU","WE","TH","FR","SA","SU"],ie=de.z.object({day:de.z.enum(Re),occurence:de.z.number().optional()});var Bt=["SECONDLY","MINUTELY","HOURLY","DAILY","WEEKLY","MONTHLY","YEARLY"],k=u.z.object({frequency:u.z.enum(Bt),until:l.optional(),count:u.z.number().optional(),interval:u.z.number().optional(),bySecond:u.z.array(u.z.number().min(0).max(60)).optional(),byMinute:u.z.array(u.z.number().min(0).max(59)).optional(),byHour:u.z.array(u.z.number().min(0).max(23)).optional(),byDay:u.z.array(ie).optional(),byMonthday:u.z.array(u.z.number().min(-31).max(31)).optional(),byYearday:u.z.array(u.z.number().min(1).max(366)).optional(),byWeekNo:u.z.array(u.z.number().min(1).max(53)).optional(),byMonth:u.z.array(u.z.number().min(1).max(12)).optional(),bySetPos:u.z.array(u.z.number().min(-366).max(366)).optional(),workweekStart:u.z.enum(Re).optional()});var et=require("zod");var ae=et.z.object({range:et.z.literal("THISANDFUTURE").optional(),value:l});var tt=["TENTATIVE","CONFIRMED","CANCELLED"];var Ut=["TRANSPARENT","OPAQUE"],kt=["PRIVATE","PUBLIC","CONFIDENTIAL"],Zt=y.z.union([y.z.object({duration:K,end:y.z.never().optional()}),y.z.object({duration:y.z.never().optional(),end:l})]),Ft=y.z.object({summary:y.z.string(),uid:y.z.string(),created:l.optional(),lastModified:l.optional(),stamp:l,start:l,location:y.z.string().optional(),description:y.z.string().optional(),categories:y.z.array(y.z.string()).optional(),recurrenceRule:k.optional(),alarms:y.z.array(ne).optional(),timeTransparent:y.z.enum(Ut).optional(),url:y.z.string().url().optional(),geo:y.z.string().optional(),class:y.z.enum(kt).optional(),organizer:se.optional(),priority:y.z.string().optional(),sequence:y.z.number().optional(),status:y.z.enum(tt).optional(),attach:y.z.string().optional(),recurrenceId:ae.optional(),attendees:y.z.array(U).optional(),comment:y.z.string().optional()}),ce=y.z.intersection(Ft,Zt);var R=require("zod");var Wt=["STANDARD","DAYLIGHT"],Oe=R.z.object({type:R.z.enum(Wt),start:R.z.date(),offsetTo:R.z.string(),offsetFrom:R.z.string(),recurrenceRule:k.optional(),comment:R.z.string().optional(),recurrenceDate:l.optional(),name:R.z.string().optional()}),pe=R.z.object({id:R.z.string(),lastModified:R.z.date().optional(),url:R.z.string().url().optional(),props:R.z.array(Oe)});var Ht=["PUBLISH"],rt=v.z.object({version:v.z.literal("2.0"),prodId:v.z.string(),method:v.z.union([v.z.enum(Ht),v.z.string()]).optional(),timezones:v.z.array(pe).optional(),events:v.z.array(ce).optional()});var be=(e,t)=>(t==null?void 0:t.VALUE)==="BINARY"?{type:"binary",encoding:(t==null?void 0:t.ENCODING)||"BASE64",binary:e,value:t==null?void 0:t.VALUE}:{type:"uri",url:e,formatType:t==null?void 0:t.FMTTYPE},Er=(e,t)=>te.parse(be(e,t));var C=e=>e.replace(/mailto:/gi,"");var $=(e,t)=>({email:C(e),delegatedFrom:t!=null&&t["DELEGATED-FROM"]?C(t["DELEGATED-FROM"]):void 0,dir:t==null?void 0:t.DIR,member:t!=null&&t.MEMBER?C(t.MEMBER):void 0,name:t==null?void 0:t.CN,partstat:t==null?void 0:t.PARTSTAT,role:t==null?void 0:t.ROLE,sentBy:t!=null&&t["SENT-BY"]?C(t["SENT-BY"]):void 0}),lr=(e,t)=>U.parse($(e,t));var Z=g(require("lodash/set"),1);var L=e=>{let t=e,o={};t[0]==="-"&&((0,Z.default)(o,"before",!0),t=t.slice(1)),t=t.slice(1);let r=t.split("T"),n=r[0];if(n.includes("D")){let[i,a]=n.split("D");(0,Z.default)(o,"days",Number(i)),n=a}if(n.includes("W")){let[i,a]=n.split("W");(0,Z.default)(o,"weeks",Number(i)),n=a}let s=r[1];if(s){if(s.includes("H")){let[i,a]=s.split("H");(0,Z.default)(o,"hours",Number(i)),s=a}if(s.includes("M")){let[i,a]=s.split("M");(0,Z.default)(o,"minutes",Number(i)),s=a}if(s.includes("S")){let[i,a]=s.split("S");(0,Z.default)(o,"seconds",Number(i)),s=a}}return o},fr=e=>K.parse(L(e));var ot=require("zod"),Ae=e=>{let t=parseInt(e.slice(0,4),10),o=parseInt(e.slice(4,6),10)-1,r=parseInt(e.slice(6,8),10);return new Date(t,o,r)},gr=e=>ot.z.date().parse(Ae(e)),Y=e=>{let t=parseInt(e.slice(0,4),10),o=parseInt(e.slice(4,6),10)-1,r=parseInt(e.slice(6,8),10),n=parseInt(e.slice(9,11),10),s=parseInt(e.slice(11,13),10),i=parseInt(e.slice(13,15),10);return new Date(Date.UTC(t,o,r,n,s,i))},dr=e=>ot.z.date().parse(Y(e));var O=(e,t)=>({date:(t==null?void 0:t.VALUE)==="DATE"?Ae(e):Y(e),type:t==null?void 0:t.VALUE,timezone:t==null?void 0:t.TZID}),Rr=(e,t)=>l.parse(O(e,t));var Ve=(e,t)=>(t==null?void 0:t.VALUE)==="DATE-TIME"||(t==null?void 0:t.VALUE)==="DATE"?{type:"absolute",value:O(e,t),options:{related:t==null?void 0:t.RELATED}}:{type:"relative",value:L(e),options:{related:t==null?void 0:t.RELATED}},Or=(e,t)=>oe.parse(Ve(e,t));var $t=g(require("lodash/set"),1);var br=e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e,nt=e=>e.map(t=>{let[o,...r]=t.split(Q),n=r.join(Q);return{property:o,value:br(n)}},{}),Ar=e=>e.reduce((t,o)=>((0,$t.default)(t,o.property,o.value),t),{}),wt=e=>Ar(nt(e));var Vr=e=>{let t=!1,o;for(let s=0;s<e.length&&o===void 0;s+=1)e.charAt(s)===Ot&&(t=!t),e.charAt(s)===Rt&&!t&&(o=s);if(o===void 0)throw Error(`Line not valid: ${e}`);let r=e.substring(0,o),n=e.substring(o+1);return{property:r,value:n}},I=e=>{let{property:t,value:o}=Vr(e);if(t.includes(h)){let[r,...n]=t.split(h),s=wt(n);return{property:r,options:s,value:o}}return{property:t,value:o}};var S=e=>{let t=[],o=e.split(ue).filter(r=>r!=="");for(let r=0;r<o.length;){let n=o[r];for(r+=1;o[r]&&/^[ \t]/.test(o[r]);)n+=o[r].trimStart(),r+=1;t.push(n)}return t};var De=e=>{let t=e.replace(dt,""),o=S(t),r={},n=[],s=[];return o.forEach(i=>{let{property:a,options:E,value:c}=I(i),T=ct[a];if(T){if(T==="trigger"){(0,F.default)(r,T,Ve(c,E));return}if(T==="duration"){(0,F.default)(r,T,L(c));return}if(T==="repeat"){(0,F.default)(r,T,Number(c));return}if(T==="attachment"){n.push(be(c,E));return}if(T==="attendee"){s.push($(c,E));return}(0,F.default)(r,T,c)}}),n.length>0&&(0,F.default)(r,"attachments",n),s.length>0&&(0,F.default)(r,"attendees",s),r},Dr=e=>ne.parse(De(e));var ze=g(require("lodash/set"),1);var N=g(require("lodash/set"),1);var xe=(e,t)=>({name:t==null?void 0:t.CN,dir:t==null?void 0:t.DIR,sentBy:t!=null&&t["SENT-BY"]?C(t["SENT-BY"]):void 0,email:C(e)}),xr=(e,t)=>se.parse(xe(e,t));var w=g(require("lodash/set"),1);var Gt={BYDAY:"byDay",BYHOUR:"byHour",BYMINUTE:"byMinute",BYMONTH:"byMonth",BYMONTHDAY:"byMonthday",BYSECOND:"bySecond",BYSETPOS:"bySetPos",BYWEEKNO:"byWeekNo",BYYEARDAY:"byYearday",COUNT:"count",FREQ:"frequency",INTERVAL:"interval",UNTIL:"until",WKST:"workweekStart"};var Ie=e=>{if(e.length===2)return{day:e};let o=e.slice(0,-2);return{day:e.replace(o,""),occurence:Number(o)}},Ir=e=>ie.parse(Ie(e));var Sr=["until"],Jt=e=>Sr.includes(e),Nr=["bySecond","byMinute","byHour","byMonthday","byYearday","byWeekNo","byMonth","bySetPos"],qt=e=>Nr.includes(e),zr=["byDay"],Qt=e=>zr.includes(e),Kr=["count","interval"],Xt=e=>Kr.includes(e),G=e=>{let t={};return nt(e.split(h)).forEach(r=>{let{property:n,value:s}=r,i=Gt[n];if(i){if(Jt(i)){(0,w.default)(t,i,O(s));return}if(qt(i)){(0,w.default)(t,i,s.split(q).map(a=>Number(a)));return}if(Qt(i)){(0,w.default)(t,i,s.split(q).map(a=>Ie(a)));return}if(Xt(i)){(0,w.default)(t,i,Number(s));return}(0,w.default)(t,i,s)}}),t},vr=e=>k.parse(G(e));var Se=e=>{let t=e.replace(gt,""),o=S(t.replace(Ue,"")),r={},n=[];o.forEach(i=>{let{property:a,options:E,value:c}=I(i),T=Dt[a];if(T){if(fe(T)){(0,N.default)(r,T,O(c,E));return}if(ge(T)){(0,N.default)(r,T,c.split(q));return}if(T==="recurrenceRule"){(0,N.default)(r,T,G(c));return}if(T==="duration"){(0,N.default)(r,T,L(c));return}if(T==="organizer"){(0,N.default)(r,T,xe(c,E));return}if(T==="sequence"){(0,N.default)(r,T,Number(c));return}if(T==="attendee"){n.push($(c,E));return}(0,N.default)(r,T,c)}});let s=[...e.matchAll(Ue)].map(i=>i[0]);if(s.length>0){let i=s.map(a=>De(a));(0,N.default)(r,"alarms",i)}return n.length>0&&(0,N.default)(r,"attendees",n),r},Mr=e=>ce.parse(Se(e));var st=g(require("lodash/set"),1);var me=g(require("lodash/set"),1);var Te=(e,t)=>{let o=e.replace(lt,"").replace(ft,""),r=S(o),n={type:t||"STANDARD"};return r.forEach(s=>{let{property:i,options:a,value:E}=I(s),c=zt[i];if(c){if(c==="start"){(0,me.default)(n,c,Y(E));return}if(c==="recurrenceRule"){(0,me.default)(n,c,G(E));return}if(c==="recurrenceDate"){(0,me.default)(n,c,O(E,a));return}(0,me.default)(n,c,E)}}),n},jr=(e,t)=>Oe.parse(Te(e,t));var Ne=e=>{let t=e.replace(Et,""),o=S(t.replace(_e,"").replace(Pe,"")),r={props:[]};o.forEach(i=>{let{property:a,value:E}=I(i),c=St[a];if(c){if(c==="lastModified"){(0,st.default)(r,c,Y(E));return}(0,st.default)(r,c,E)}});let n=[...t.matchAll(_e)].map(i=>i[0]);n.length>0&&n.forEach(i=>{r.props.push(Te(i,"STANDARD"))});let s=[...t.matchAll(Pe)].map(i=>i[0]);return s.length>0&&s.forEach(i=>{r.props.push(Te(i,"DAYLIGHT"))}),r},Cr=e=>pe.parse(Ne(e));var er=e=>{let t=e.replace(ut,""),o=S(t.replace(Be,"").replace(he,"")),r={};o.forEach(i=>{let{property:a,value:E}=I(i),c=mt[a];c&&(0,ze.default)(r,c,E)});let n=[...t.matchAll(he)].map(i=>i[0]);if(n.length>0){let i=n.map(a=>Ne(a));(0,ze.default)(r,"timezones",i)}let s=[...t.matchAll(Be)].map(i=>i[0]);if(s.length>0){let i=s.map(a=>Se(a));(0,ze.default)(r,"events",i)}return r},Lr=e=>rt.parse(er(e));var tr=(e,t)=>({value:O(e,t),range:t==null?void 0:t.RANGE}),Yr=(e,t)=>ae.parse(tr(e,t));var p=require("date-fns"),it=(e,t)=>t.before?(0,p.subWeeks)((0,p.subDays)((0,p.subHours)((0,p.subMinutes)((0,p.subSeconds)(e,t.seconds||0),t.minutes||0),t.hours||0),t.days||0),t.weeks||0):(0,p.addWeeks)((0,p.addDays)((0,p.addHours)((0,p.addMinutes)((0,p.addSeconds)(e,t.seconds||0),t.minutes||0),t.hours||0),t.days||0),t.weeks||0),hr=(e,t)=>{let o=Math.abs((0,p.differenceInWeeks)(t,e)),r=Math.abs((0,p.differenceInDays)(t,e)),n=r-o*7,s=Math.abs((0,p.differenceInHours)(t,e)),i=s-r*24,a=Math.abs((0,p.differenceInMinutes)(t,e)),E=a-s*60,T=Math.abs((0,p.differenceInSeconds)(t,e))-a*60;return{before:e>t,weeks:o,days:n,hours:i,minutes:E,seconds:T}};var _r=e=>e.end?e.end.date:it(e.start.date,e.duration);0&&(module.exports={attendeePartStatusTypes,classTypes,dateObjectTypes,encodingTypes,generateIcsAlarm,generateIcsAttachment,generateIcsAttendee,generateIcsCalendar,generateIcsDate,generateIcsDateTime,generateIcsDuration,generateIcsEvent,generateIcsMail,generateIcsOrganizer,generateIcsRecurrenceRule,generateIcsTimeStamp,generateIcsTimezone,generateIcsTimezoneProp,generateIcsTrigger,generateIcsWeekdayNumber,getDurationFromInterval,getEventEnd,getEventEndFromDuration,icsAlarmToObject,icsAttachmentToObject,icsAttendeeToObject,icsCalendarToObject,icsDateTimeToDateTime,icsDateToDate,icsDurationToObject,icsEventToObject,icsOrganizerToObject,icsRecurrenceIdToObject,icsRecurrenceRuleToObject,icsTimeStampToObject,icsTimezonePropToObject,icsTimezoneToObject,icsTriggerToObject,icsWeekdayNumberToObject,parseIcsAlarm,parseIcsAttachment,parseIcsAttendee,parseIcsCalendar,parseIcsDate,parseIcsDateTime,parseIcsDuration,parseIcsEvent,parseIcsOrganizer,parseIcsRecurrenceId,parseIcsRecurrenceRule,parseIcsTimezone,parseIcsTimezoneProp,parseIcsTrigger,parseIcsWeekdayNumber,parseicsTimeStamp,recurrenceObjectKeyIsNumber,recurrenceObjectKeyIsNumberArray,recurrenceObjectKeyIsTimeStamp,recurrenceObjectKeyIsWeekdayNumberArray,recurrenceRuleFrequencies,statusTypes,timeTransparentTypes,timezonePropTypes,triggerRelations,valueTypes,weekDays,zAttachment,zAttendee,zDateObject,zOrganizer,zRecurrenceId,zVAlarm,zVCalendar,zVCalendarMethods,zVEvent,zVEventBase,zVEventDuration,zVEventDurationOrEnd,zVEventRecurrenceRule,zVEventTrigger,zVEventTriggerBase,zVEventTriggerOptions,zVEventTriggerUnion,zVTimezone,zVTimezoneProp,zWeekdayNumberObject});
